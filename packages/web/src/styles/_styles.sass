@import "variables"

// Bootstrap (full import for proper variable cascading)
@import "bootstrap/scss/bootstrap"

// ============================================
// KIM OS - Retro Terminal Styling
// ============================================

// Body background
body
  background-image: url('/kim-background.jpeg')
  background-size: cover
  background-position: center
  background-attachment: fixed
  min-height: 100vh

// CRT Scanline Overlay
.crt-overlay
  pointer-events: none
  position: fixed
  top: 0
  left: 0
  width: 100%
  height: 100%
  background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%)
  background-size: 100% 4px
  z-index: 1000
  opacity: 0.15
  mix-blend-mode: overlay

// Noise texture overlay
.noise-overlay
  pointer-events: none
  position: fixed
  top: 0
  left: 0
  width: 100%
  height: 100%
  opacity: 0.03
  z-index: 999
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E")

// Window Frame
.window-frame
  border: 2px solid #4a5a54
  box-shadow: 6px 6px 0px rgba(0, 0, 0, 0.25)
  background: $kim-terminal-light

// Title Bar
.title-bar
  background: linear-gradient(90deg, $kim-title 0%, darken($kim-title, 8%) 100%)
  border-bottom: 2px solid #4a5a54
  padding: 0.25rem 0.5rem
  display: flex
  justify-content: space-between
  align-items: center
  user-select: none

  .title-text
    font-weight: bold
    color: black
    text-transform: uppercase
    letter-spacing: 0.05em

  .window-controls
    display: flex
    gap: 0.25rem

    button
      width: 20px
      height: 20px
      display: flex
      align-items: center
      justify-content: center
      border: 1px solid black
      background: $kim-border
      color: white
      font-size: 0.75rem
      cursor: pointer
      transition: background 0.1s

      &:hover
        background: darken($kim-border, 10%)

      &.close-btn
        background: $kim-accent
        &:hover
          background: darken($kim-accent, 10%)

      &:active
        transform: translateY(1px)

// Panel styling
.kim-panel
  border: 2px solid $kim-border
  background: white
  box-shadow: 3px 3px 0px rgba(0, 0, 0, 0.2)

  .panel-header
    background: $kim-title
    padding: 0.25rem 0.5rem
    border-bottom: 1px solid $kim-border
    text-align: center

    h2, h3, h4, h5, h6
      margin: 0
      font-weight: bold
      color: black
      text-transform: uppercase
      letter-spacing: 0.05em

  .panel-body
    padding: 1rem

// Retro Button
.btn-retro
  background: $kim-border
  color: white
  border: 2px solid black
  border-bottom-width: 4px
  border-right-width: 4px
  font-family: $font-family-monospace
  text-transform: uppercase
  letter-spacing: 0.05em
  transition: all 0.1s

  &:hover
    background: $kim-accent
    color: white

  &:active
    border-bottom-width: 2px
    border-right-width: 2px
    transform: translate(2px, 2px)

  &.btn-accent
    background: $kim-accent

// Retro Input
.input-retro
  background: #f5f5f5
  border: 2px solid $kim-border
  border-style: inset
  font-family: $font-family-monospace
  text-transform: uppercase

  &:focus
    outline: none
    border-color: $kim-accent
    box-shadow: none

// Progress Bar with dither pattern
.progress-retro
  height: 1.25rem
  background: #d1d5db
  border: 1px solid #6b7280
  border-radius: 0
  overflow: hidden
  position: relative

  .progress-bar
    height: 100%
    background: $kim-border
    border-radius: 0
    position: relative

    &::after
      content: ''
      position: absolute
      inset: 0
      background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAIklEQVQIW2NkQAKrVq36zwjjgzhhYWGMYAEYB8RmROaABADeOQ8CXl/xfgAAAABJRU5ErkJggg==")
      opacity: 0.3

  &.progress-accent .progress-bar
    background: $kim-accent

// Category Card (hoverable with shadow shift)
.category-card
  background: white
  border: 2px solid $kim-border
  padding: 0.75rem
  box-shadow: 3px 3px 0px rgba(0, 0, 0, 0.2)
  transition: all 0.15s ease
  cursor: pointer

  &:hover
    box-shadow: none
    transform: translate(2px, 2px)

    .category-title
      color: $kim-accent

  .category-icon
    color: $kim-accent
    font-size: 2rem

  .category-title
    font-weight: bold
    text-transform: uppercase
    transition: color 0.15s

  .category-subtitle
    font-family: $font-family-monospace
    font-size: 0.75rem
    color: #6b7280
    text-transform: uppercase

  .category-percent
    font-family: $font-family-monospace
    font-size: 1.5rem
    font-weight: bold
    color: $kim-border

  .category-stats
    font-family: $font-family-monospace
    font-size: 0.75rem
    color: #6b7280

// Loadout Item Row
.loadout-item
  display: flex
  align-items: center
  gap: 0.75rem
  padding: 0.5rem
  background: #f5f5f5
  border: 1px solid #d1d5db
  transition: border-color 0.15s
  cursor: pointer

  &:hover
    border-color: $kim-accent

  .loadout-image
    width: 48px
    height: 48px
    min-width: 48px
    background: #d1d5db
    border: 1px solid #9ca3af
    overflow: hidden
    display: flex
    align-items: center
    justify-content: center

    img
      width: 100%
      height: 100%
      object-fit: contain
      image-rendering: pixelated

  .loadout-info
    flex: 1
    min-width: 0

  .loadout-type
    font-size: 0.75rem
    font-weight: bold
    text-transform: uppercase
    color: $kim-accent

  .loadout-name
    font-family: $font-family-monospace
    font-size: 1rem
    line-height: 1.2
    white-space: nowrap
    overflow: hidden
    text-overflow: ellipsis

  .loadout-status
    font-size: 0.7rem
    color: #6b7280
    display: flex
    align-items: center
    gap: 0.25rem

    .status-dot
      width: 6px
      height: 6px
      border-radius: 50%
      background: $success

      &.status-gold
        background: #f59e0b

      &.status-incomplete
        background: #C0392B

    .rank-display
      font-family: $font-family-monospace
      font-size: 0.7rem

      &.rank-incomplete
        color: #C0392B
        font-weight: 500

// Filter Tabs
.filter-tabs
  display: flex
  gap: 0.5rem

  .filter-tab
    padding: 0.25rem 0.75rem
    font-family: $font-family-monospace
    font-size: 0.875rem
    border: 1px solid $kim-border
    background: #e5e7eb
    color: #374151
    cursor: pointer
    transition: all 0.1s

    &:hover
      background: #d1d5db

    &.active
      background: $kim-accent
      color: white
      border-color: black

// Search Input
.search-retro
  display: flex
  align-items: center
  background: #f5f5f5
  border: 2px solid $kim-border
  border-style: inset
  padding: 0 0.5rem

  .search-icon
    color: #6b7280
    font-size: 1rem

  input
    border: none
    background: transparent
    font-family: $font-family-monospace
    text-transform: uppercase
    padding: 0.25rem 0.5rem
    width: 100%

    &::placeholder
      color: #9ca3af

    &:focus
      outline: none

// Status Bar (footer)
.status-bar
  background: $kim-terminal-light
  border-top: 2px solid #9ca3af
  padding: 0.25rem 0.5rem
  display: flex
  justify-content: space-between
  align-items: center
  font-family: $font-family-monospace
  font-size: 0.75rem
  text-transform: uppercase

  .status-indicator
    display: flex
    align-items: center
    gap: 0.25rem

    .status-dot
      width: 8px
      height: 8px
      border-radius: 50%
      background: $success
      animation: pulse 2s infinite

  .status-info
    color: #6b7280

@keyframes pulse
  0%, 100%
    opacity: 1
  50%
    opacity: 0.5

// Header Bar
.header-bar
  background: $kim-terminal-light
  border: 2px solid #4a5a54
  box-shadow: 6px 6px 0px rgba(0, 0, 0, 0.25)
  padding: 0.25rem 0.5rem
  display: flex
  justify-content: space-between
  align-items: center
  user-select: none
  margin-bottom: 1.5rem

  .header-logo
    display: flex
    align-items: center
    gap: 0.5rem
    font-weight: bold
    letter-spacing: 0.1em
    text-transform: uppercase
    color: $kim-border

    .logo-accent
      color: $kim-accent

  .header-controls
    display: flex
    align-items: center
    gap: 1rem
    font-family: $font-family-monospace
    font-size: 0.875rem

    .user-badge
      padding: 0.25rem 0.5rem
      background: white
      border: 1px solid $kim-border
      box-shadow: inset 2px 2px 0px rgba(0, 0, 0, 0.1)

    .header-btn
      padding: 0.25rem
      border: 1px solid transparent
      background: transparent
      cursor: pointer
      transition: all 0.1s

      &:hover
        background: $kim-title
        border-color: $kim-border

// Item image styling
.item-image
  width: 64px
  height: 64px
  object-fit: contain
  background: #e5e7eb
  border: 1px solid #9ca3af
  image-rendering: pixelated

  &.placeholder
    display: flex
    align-items: center
    justify-content: center
    color: #9ca3af
    font-size: 0.75rem

// Mastery check
.mastery-check
  color: $success
  font-weight: bold
  font-size: 1.25rem

// Mastered item opacity
.mastered
  opacity: 0.7

// Custom scrollbar
::-webkit-scrollbar
  width: 12px
  background: $kim-terminal-dark

::-webkit-scrollbar-thumb
  background: $kim-title
  border: 2px solid $kim-terminal-dark

::-webkit-scrollbar-thumb:hover
  background: lighten($kim-title, 10%)

// Material Icons sizing helper
.material-icons
  font-size: inherit
  vertical-align: middle

// Badge overrides
.badge
  font-family: $font-family-monospace
  font-weight: normal
  text-transform: uppercase
  letter-spacing: 0.05em
